query MegaQuery($after: String) {
  rateLimit {
    limit
    cost
    remaining
    resetAt
  }
  viewer {
    name
    login
    avatarUrl
    repositories(
      first: 100
      after: $after
      orderBy: { direction: ASC, field: CREATED_AT }
      ownerAffiliations: [OWNER, ORGANIZATION_MEMBER, COLLABORATOR]
      affiliations: [ORGANIZATION_MEMBER, COLLABORATOR, OWNER]
    ) {
      totalCount
      pageInfo {
        hasNextPage
        endCursor
      }
      nodes {
        id
        name
        owner {
          login
        }
        pullRequests(first: 100, states: OPEN) {
          nodes {
            id
            title
            createdAt
            mergeable
            number
            isDraft
            url
            viewerDidAuthor
            labels(first: 5) {
              nodes {
                name
              }
            }
            commits(last: 1) {
              nodes {
                commit {
                  status {
                    state
                  }
                  statusCheckRollup {
                    state
                  }
                }
              }
            }
            assignees(first: 5) {
              nodes {
                id
                avatarUrl
                login
              }
            }
            author {
              login
              avatarUrl
            }
            reviewDecision
          }
        }
      }
    }
  }
}
